# KyberSwap Exploit

1. The report for this exploit is in [REPORT.md](./REPORT.md)
2. The test file that performs the exploit is in [test/KyberswapTest.sol](./test/KyberswapTest.sol). The details are in function `performFullHack` at [KyberswapTest.sol:133-236](https://github.com/one-hundred-proof/kyberswap-exploit/blob/8d1bc52b040d6bdab44813835d4b7cf33571f1f2/test/KyberswapTest.sol#L133-L236)

## Setup

### Environment Variables

0. Install Foundry

Follow the [installation instructions](https://book.getfoundry.sh/getting-started/installation)

1.
Set `EVMNET_FORK_URL`

e.g.

```
export EVMNET_FORK_URL="https://mainnet.infura.io/v3/deadbeefdeadbeefdeadbeefdeadbeef"
```

Or you can add an entry in a `.env` file e.g.

```
EVMNET_FORK_URL="https://mainnet.infura.io/v3/deadbeefdeadbeefdeadbeefdeadbeef"
```

2.

```
$ npm install
```

### Run PoC

```
$ ./run-forge
```